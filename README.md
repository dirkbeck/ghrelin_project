# README

This project contains two distinct analysis pipelines:

1. **Movement analysis**  
   – Reads raw tracking Excel files stored in the the Raw_data subdirectory  
   – Cleans & exports per‐trial CSVs  
   – Computes movement metrics and produces behavioral plots  

2. **Modeling & illustration**  
   – Generates standalone schematic figures (performance curves, decision‐maps, phase diagrams)  
   – Does not depend on the raw or cleaned data  

---

## 1. Movement Analysis

### Directory structure
```
.
├── Data
│   ├── Raw_data              # Put your raw .xlsx files here
│   ├── Extracted_csvs        # (auto) CSVs written by clean_and_export.py
│   └── clean_and_export.py   # Excel → cleaned CSV exporter
├── analysis.py               # Reads the CSVs and writes all movement plots
└── plots                     # (auto) PDFs generated by analysis.py
```

### What happens

1. **Data/clean_and_export.py**  
   • Scans every `.xlsx` in `Data/Raw_data/`  
   • Extracts “Trial time”, “X center”, “Y center” and metadata (task/animal/group/treatment)  
   • Writes one or more `<task>_<animal>_<group>_<condition>.csv` files into `Data/Extracted_csvs/`

2. **analysis.py**  
   • Loads **all** CSVs from `Data/Extracted_csvs/`  
   • Computes step‐lengths, turn‐angles, entropy, CV, radius of gyration, MSD exponent, velocity autocorr, turn frequency, pause fraction, tortuosity, quadrant proportions, etc.  
   • Produces a hierarchy of PDF plots under `plots/`, including:
     - Non-manipulation paired line-plots & signed-log-p bar charts  
     - Manipulation boxplots, ANOVA heatmaps, radar plots  

Both scripts automatically create their output directories if missing.

---

## 2. Modeling & Illustration

These four scripts are self-contained and do not read the Excel or CSV data. They produce conceptual figures for manuscripts or talks:

- **perf_complexity.py**  
  • “perf_complexity.pdf”:
    - Panel A: inverted-U performance curves (Simple, Mid, Complex)  
    - Panel B: P(success) heatmap vs. activity & complexity  

- **decision_maps.py**  
  • “low_ghrelin_maps.pdf” and “high_ghrelin_maps.pdf”:
    - Grid of decision-avoidance maps with and without decision-dimension dependence  

- **decision_space.py**  
  • “decision_space.pdf”:
    - Stackplots showing probability distributions over decision-space dimensionality for DMS/DLS  

- **phase_plot.py**  
  • “phase_plot.pdf”:
    - Phase diagram of approach probability vs. ghrelin dose & task context  
  • “line_analysis.pdf”:
    - Summary line-plots (mean P(approach), complexity/base difference, gate & fade functions)

_All outputs are saved as PDFs in the project root (or `plots/` only for the movement analysis)._

---

## Prerequisites

• Python 3.7+  
• Packages (install via `pip install …`):  
  `pandas` `openpyxl` `numpy` `scipy` `seaborn` `matplotlib` `tqdm`

---

## Setup

(Optional) Create & activate a virtual environment:
```bash
python3 -m venv venv
source venv/bin/activate
```
Install dependencies:
```bash
pip install --upgrade pip
pip install pandas openpyxl numpy scipy seaborn matplotlib tqdm
```

---

## How to run

### A) Movement pipeline

1. Clean & export:
   ```bash
   python3 Data/clean_and_export.py
   ```
2. Generate plots:
   ```bash
   python3 analysis.py
   ```
3. View all PDFs under `plots/`

### B) Modeling scripts

Run each script in any order:
```bash
python3 perf_complexity.py
python3 decision_maps.py
python3 decision_space.py
python3 phase_plot.py
```
You’ll get the corresponding PDF(s) in the project root.

---

## Cleaning up

To start from scratch:
```bash
rm -rf Data/Extracted_csvs/*
rm -rf plots/*
rm perf_complexity.pdf low_ghrelin_maps.pdf high_ghrelin_maps.pdf \
   decision_space.pdf phase_plot.pdf line_analysis.pdf
```
